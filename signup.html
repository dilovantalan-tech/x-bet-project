<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>X-BET | Sign Up</title>
    <style>
        /* ... your signup styles ... */
    </style>
</head>
<body>
    <!-- ... your signup form ... -->
    
    <script>
        document.getElementById('signupForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const username = document.getElementById('username').value.trim();
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            // Validation
            if (password !== confirmPassword) {
                alert('Passwords do not match');
                return;
            }
            
            // Check if user exists
            const registeredUsers = JSON.parse(localStorage.getItem('registeredUsers') || '{}');
            if (registeredUsers[username]) {
                alert('Username already exists');
                return;
            }
            
            // Create user in registeredUsers
            registeredUsers[username] = email;
            localStorage.setItem('registeredUsers', JSON.stringify(registeredUsers));
            
            // Create user data with proper structure
            const userData = {
                username: username,
                email: email,
                password: password,
                balance: 0,
                transactionCode: generateTransactionCode(username),
                isAdmin: false,
                status: 'active',
                registeredAt: new Date().toISOString(),
                lastLogin: new Date().toISOString(),
                activities: []
            };
            
            localStorage.setItem('userData_' + username, JSON.stringify(userData));
            
            alert('Account created successfully! You can now login.');
            window.location.href = 'login.html';
        });
        
        function generateTransactionCode(username) {
            const prefix = username.substring(0, 3).toUpperCase();
            const timestamp = Date.now().toString(36).toUpperCase().substr(-8);
            const random = Math.random().toString(36).substr(2, 8).toUpperCase();
            return `XBT-${prefix}-${timestamp}-${random}`;
        }
    </script>
</body>
</html>
